{% liquid
  assign ss = section.settings
  assign sc = '#shopify-section-' | append: section.id

  assign min_duration = 1
  assign max_duration = 100
  assign duration = section.blocks.size | times: max_duration | divided_by: ss.speed
  assign speed = duration | at_least: min_duration
%}

<style>
  {{ sc }} .image-slideshow {
    
  }
  {{ sc }} .image-slideshow .heading-wrapper {
    padding: 0 0 24px;
  }
  {{ sc }} .image-slideshow__container {
    overflow: hidden;
  }
  {{ sc }} .image-slideshow__items {
    overflow: hidden;
    width: max-content;
    display: flex;
    align-items: stretch;
    gap: 12px;
    animation: image-slideshow-items {{ speed }}s linear infinite;
  }
  {{ sc }} .image-slideshow__items::after {
    content: '';
    display: none;
  }
   @keyframes image-slideshow-items {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-60%);
    }
  }
  {{ sc }} .image-slideshow__item {
    max-width: 420px;
    width: 100%;
  }
  {{ sc }} .image-slideshow__item img {
    width: 100%;
  }
</style>

<div class="image-slideshow" style="background-color: {{ ss.background_color }};">
  <container class="image-slideshow__container">
    {% render 'heading' heading: true, h1: ss.heading_h1, title: ss.heading_title, align: ss.heading_align, align_mb: ss.heading_align_mb, sub_text: ss.heading_sub_text, text: ss.heading_text,
    ratings: ss.heading_ratings, ratings_stars: ss.heading_ratings_stars, ratings_logo: ss.heading_ratings_logo, ratings_text: ss.heading_ratings_text,  shop_all: ss.heading_shop_all %}

    <div class="image-slideshow__items">
      {% for i in (1..3) %}
        {% for block in section.blocks %}
          <div class="image-slideshow__item">
            {% render 'responsive-image' image: block.settings.image, image_width: 400 %}
          </div>
        {% endfor %}
      {% endfor %}
    </div>
  </container>
</div>

{% schema %}
  {
    "name": "Image Slideshow",
    "settings": [
      {
        "type": "color",
        "id": "background_color",
        "label": "Background Color",
        "default": "#C9C9F2"
      }, {
        "type": "range",
        "id": "speed",
        "label": "Speed",
        "default": 10,
        "min": 1,
        "max": 100,
        "step": 1
      }, {
        "type": "header",
        "content": "Heading"
      }, {
        "type": "checkbox",
        "id": "heading_h1",
        "label": "Heading H1"
      }, {
        "type": "text",
        "id": "heading_title",
        "label": "Heading Title",
        "default": "Confident Body Starts Here"
      }, {
        "type": "text",
        "id": "heading_sub_text",
        "label": "Heading Sub-Text"
      }, {
        "type": "text",
        "id": "heading_text",
        "label": "Heading Text"
      }, {
        "type": "select",
        "id": "heading_align",
        "label": "Heading Alignment",
        "default": "center",
        "options": [
          { "value": "start", "label": "Start" }, 
          { "value": "center", "label": "Center" },
          { "value": "end", "label": "End" }
        ]
      }, {
        "type": "select",
        "id": "heading_align_mb",
        "label": "Heading Alignment Mobile",
        "default": "center-mb",
        "options": [
          { "value": "start-mb", "label": "Start" }, 
          { "value": "center-mb", "label": "Center" },
          { "value": "end-mb", "label": "End" }
        ]
      }, {
        "type": "collection",
        "id": "heading_shop_all",
        "label": "Shop All"
      }, {
        "type": "header",
        "content": "Ratings"
      }, {
        "type": "checkbox",
        "id": "heading_ratings",
        "label": "Display Ratings"
      }, {
        "type": "image_picker",
        "id": "heading_ratings_stars",
        "label": "Ratings Stars",
        "visible_if": "{{ section.settings.heading_ratings }}"
      }, {
        "type": "image_picker",
        "id": "heading_ratings_logo",
        "label": "Ratings Logo",
        "visible_if": "{{ section.settings.heading_ratings }}"
      }, {
        "type": "text",
        "id": "heading_ratings_text",
        "label": "Ratings Text",
        "visible_if": "{{ section.settings.heading_ratings }}"
      }
    ],
    "blocks": [
      {
        "type": "image",
        "name": "Image",
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          }
        ]
      }
    ]
  }
{% endschema %}